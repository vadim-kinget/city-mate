<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Deals - Lille</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%236c5ce7'/><text x='50' y='65' font-family='Arial, sans-serif' font-weight='bold' font-size='50' fill='white' text-anchor='middle'>CM</text></svg>">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <nav>
        <a href="index.html" class="logo">City<span>Mate</span></a>
        <div class="nav-links">
            <a href="index.html"> <span class="nav-icon">üó∫Ô∏è</span>
                <span class="nav-text">Map</span>
            </a>
            <a href="guides.html">
                <span class="nav-icon">üìñ</span>
                <span class="nav-text">Guides</span>
            </a>
            <a href="deals.html" class="active">
                <span class="nav-icon">üè∑Ô∏è</span>
                <span class="nav-text">Deals</span>
            </a>
            <a href="community.html">
                <span class="nav-icon">üë•</span>
                <span class="nav-text">Community</span>
            </a>
        </div>

            <div class="nav-right" style="display: flex; align-items: center; gap: 15px;">
        
            <button id="chat-toggle" class="chat-btn">
                üí¨ <span class="notif-badge">2</span>
            </button>

            <a href="profile.html" class="user-profile">
                <div class="avatar"></div>
                <span>Alex</span>
            </a>
        </div>

    </nav>

    <div class="deals-container">
        
        <header class="deals-header">
            <h1>Student Perks üè∑Ô∏è</h1>
            <p>Exclusive discounts around Lille just for you.</p>
        </header>

        <div class="deals-grid">
            
            <div class="deal-ticket">
                <div class="deal-top">
                    <div class="brand-logo bg-red">üçî</div>
                    <div class="deal-info">
                        <span class="discount">-20% OFF</span>
                        <h3>Big Fernand</h3>
                        <p>On all "Little Formule" menus between 12pm and 2pm.</p>
                    </div>
                </div>
                <div class="deal-bottom">
                    <div class="dashed-line"></div>
                    <button class="code-btn" data-code="YUMMY20">Show Code</button>
                </div>
            </div>

            <div class="deal-ticket">
                <div class="deal-top">
                    <div class="brand-logo bg-purple">üé¨</div>
                    <div class="deal-info">
                        <span class="discount">1 Place Bought = 1 Free</span>
                        <h3>UGC Cin√© Cit√©</h3>
                        <p>Valid on Tuesday nights only. Bring a friend!</p>
                    </div>
                </div>
                <div class="deal-bottom">
                    <div class="dashed-line"></div>
                    <button class="code-btn" data-code="MOVIENIGHT">Show Code</button>        
                </div>                
            </div>

            <div class="deal-ticket">
                <div class="deal-top">
                    <div class="brand-logo bg-yellow">‚òï</div>
                    <div class="deal-info">
                        <span class="discount">Free Cookie</span>
                        <h3>Notting Hill Coffee</h3>
                        <p>Get a free cookie for any XL Drink purchased.</p>
                    </div>
                </div>
                <div class="deal-bottom">
                    <div class="dashed-line"></div>
                    <button class="code-btn" data-code="COOKIE4U">Show Code</button>
                </div>
            </div>

            <div class="deal-ticket">
                <div class="deal-top">
                    <div class="brand-logo bg-green">üåç</div>
                    <div class="deal-info">
                        <span class="discount">-15% Voucher</span>
                        <h3>FlixBus</h3>
                        <p>Valid on all rides from/to Lille Europe station.</p>
                    </div>
                </div>
                <div class="deal-bottom">
                    <div class="dashed-line"></div>
                    <button class="code-btn" data-code="TRAVEL26">Show Code</button>
                </div>
            </div>

         </div> 
    </div>
<div id="chat-drawer" class="chat-drawer">
    
    <div class="chat-header">
        <h3>Messages</h3>
        <button id="close-chat" class="close-btn">&times;</button>
    </div>

    <div id="chat-list-view" class="chat-view active">
        
        <div class="chat-tabs">
            <span class="chat-tab active">All</span>
            <span class="chat-tab">Groups</span>
            <span class="chat-tab">Private</span>
        </div>

        <div class="conversations-list">
            
            <div class="convo-item" onclick="openConversation('Museum Lovers üé®', true)">
                <div class="convo-avatar bg-purple">üé®</div>
                <div class="convo-info">
                    <h4>Museum Lovers</h4>
                    <p>Lena: Anyone going to Palais des B...</p>
                </div>
                <span class="time">2m</span>
            </div>

            <div class="convo-item" onclick="openConversation('Sarah J. üá¨üáß', false)">
                <div class="convo-avatar" style="background: #ff7675;">SJ</div>
                <div class="convo-info">
                    <h4>Sarah J.</h4>
                    <p>That sounds great! See you there.</p>
                </div>
                <span class="time">1h</span>
            </div>

             <div class="convo-item unread">
                <div class="convo-avatar" style="background: #0984e3;">MK</div>
                <div class="convo-info">
                    <h4>Mehdi K.</h4>
                    <p>Do you know where the library is?</p>
                </div>
                <span class="time">3h</span>
                <div class="unread-dot"></div>
            </div>
        </div>
    </div>

    <div id="chat-conversation-view" class="chat-view">
        <div class="active-chat-header">
            <button class="back-btn" onclick="closeConversation()">‚Üê</button>
            <h4 id="current-chat-name">User Name</h4>
        </div>

        <div class="messages-container">
            <div class="message received">
                <p>Hey! Are you coming to the event tonight?</p>
                <span class="msg-time">10:30 AM</span>
            </div>

            <div class="message sent">
                <p>Yes absolutely! I'm bringing a friend.</p>
                <span class="msg-time">10:32 AM</span>
            </div>
            
            <div class="message received">
                <p>Awesome, see you at the Gare St Sauveur! üöÇ</p>
                <span class="msg-time">10:33 AM</span>
            </div>
        </div>

        <div class="chat-input-area">
            <input type="text" placeholder="Type a message..." id="msg-input">
            <button class="send-btn">‚û§</button>
        </div>
    </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        
        // 1. On r√©cup√®re les √©l√©ments
        const chatDrawer = document.getElementById('chat-drawer');
        const chatToggle = document.getElementById('chat-toggle');
        const closeChatBtn = document.getElementById('close-chat');

        // V√©rification de s√©curit√© (au cas o√π on oublie le HTML)
        if (chatToggle && chatDrawer) {
            
            // 2. Ouvrir le tiroir
            chatToggle.addEventListener('click', () => {
                chatDrawer.classList.add('open');
            });

            // 3. Fermer le tiroir
            if (closeChatBtn) {
                closeChatBtn.addEventListener('click', () => {
                    chatDrawer.classList.remove('open');
                });
            }

            // Fermer si on clique sur le fond flout√© (optionnel mais sympa)
            chatDrawer.addEventListener('click', (e) => {
                if (e.target === chatDrawer) {
                    chatDrawer.classList.remove('open');
                }
            });
        }

        // --- NAVIGATION DANS LE CHAT (Liste <-> Conversation) ---
        const listView = document.getElementById('chat-list-view');
        const convoView = document.getElementById('chat-conversation-view');
        const chatTitle = document.getElementById('current-chat-name');

        // On rend ces fonctions globales pour qu'elles marchent avec les onclick="..." du HTML
        window.openConversation = function(name, isGroup) {
            if(listView && convoView) {
                listView.classList.remove('active');
                convoView.classList.add('active');
                if(chatTitle) chatTitle.textContent = name;
            }
        };

        window.closeConversation = function() {
            if(listView && convoView) {
                convoView.classList.remove('active');
                listView.classList.add('active');
            }
        };
    });
</script>

</body>

